<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vbp-parana/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Dashboard de Inteligência Territorial da Produção Agropecuária do Paraná" />
    <title>VBP Paraná - Inteligência Territorial</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  </head>
  <body class="antialiased">
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <script>
(function() {
  const TRACKING_URL = 'https://script.google.com/macros/s/AKfycbxL_UedDsYZEJJxPPIWLdynzfHgIpSKgB8u4U1dLFCpKxO9rmL609WsvdNwYyhtVPk-GA/exec';

  function getSessionId() {
    let sessionId = sessionStorage.getItem('vbp_session_id');
    if (!sessionId) {
      sessionId = 'sess_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
      sessionStorage.setItem('vbp_session_id', sessionId);
    }
    return sessionId;
  }

  const visitData = {
    page: window.location.pathname + window.location.hash,
    referrer: document.referrer || 'direto',
    userAgent: navigator.userAgent,
    language: navigator.language,
    screenWidth: screen.width,
    screenHeight: screen.height,
    platform: navigator.platform,
    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    sessionId: getSessionId()
  };

  fetch(TRACKING_URL, {
    method: 'POST',
    mode: 'no-cors',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(visitData)
  });

  window.addEventListener('hashchange', function() {
    visitData.page = window.location.pathname + window.location.hash;
    fetch(TRACKING_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(visitData)
    });
  });
})();
</script>
  </body>
</html>
